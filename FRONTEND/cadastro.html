<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
</head>

<body>
    <form id="registrationForm">
        <label for="nome">Nome:</label><br />
        <input type="text" id="nome" name="nome" /><br />
        <label for="email">Email:</label><br />
        <input type="email" id="email" name="email" /><br />
        <label for="senha">Senha:</label><br />
        <input type="password" id="senha" name="senha" /><br />
        <label for="tipo">Tipo de usu√°rio:</label><br />
        <select id="tipo" name="tipo">
            <option value="leitor">Leitor</option>
            <option value="editor">Editor</option>
        </select><br />
        <input type="submit" value="Cadastrar" />
    </form>

    <script>
        var dadosDoUsuario;

        document
            .getElementById("registrationForm")
            .addEventListener("submit", function (e) {
                e.preventDefault();

                var nome = document.getElementById("nome").value;
                var email = document.getElementById("email").value;
                var senha = document.getElementById("senha").value;
                var tipo = document.getElementById("tipo").value;

                var data = {
                    nome: nome,
                    email: email,
                    senha: senha,
                    tipo: tipo,
                };

                fetch("http://localhost:8080/usuarios/cadastro", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify(data),
                })
                    .then((response) => response.json())
                    .then((data) => {

                        sessionStorage.setItem("usuario", JSON.stringify(data))
                        // var usuarioArmazenado = JSON.parse(sessionStorage.getItem("usuario"));

                        window.location.href = "http://127.0.0.1:5500/FRONTEND/login.html";

                        window.location.reload();

                        console.log("Success:", data);
                    })
                    .catch((error) => {
                        console.error("Error:", error);
                    });
            });
    </script>
</body>

</html>